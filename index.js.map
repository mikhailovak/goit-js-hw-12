{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"46942599-830cfdf21ab89ebfad31f139e\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchData(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 15, \n        page,         \n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        throw error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet lightbox = null;\n\nexport function renderImages(images, container) {\n    const markup = images.map(image => `\n        <li class=\"image-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\"> \n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                <div class=\"image-info\">\n                    <p><strong>Likes:</strong> ${image.likes}</p>\n                    <p><strong>Views:</strong> ${image.views}</p>\n                    <p><strong>Comments:</strong> ${image.comments}</p>\n                    <p><strong>Downloads:</strong> ${image.downloads}</p>\n                </div>\n            </a>\n        </li>\n    `).join(\"\");\n    \n    // container.innerHTML = markup;\n    container.insertAdjacentHTML(\"beforeend\", markup)\n    \n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-link', { captionsData: \"alt\", captionDelay: 250 });\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function showNoResultsMessage() {\n    iziToast.error({\n        title: \"Error\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\"\n    });\n}\n","import { fetchData } from './js/pixabay-api.js';\nimport { renderImages, showNoResultsMessage } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".submit-form\");\nconst list = document.querySelector(\".list\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst loader = document.getElementById(\"loader\");\n\nform.addEventListener(\"submit\", handleSearch);\nloadMoreButton.addEventListener(\"click\", handleLoadMore);\n\nlet page = 1;\nlet currentQuery = \"\";\nlet totalPages = 0; \n\n\n\nfunction toggleVisibility(element, show) {\n    element.style.display = show ? \"block\" : \"none\";\n}\n\nfunction showLoader() {\n    toggleVisibility(loader, true);\n}\n\nfunction hideLoader() {\n    toggleVisibility(loader, false);\n}\n\nfunction clearGallery() {\n    list.innerHTML = \"\";\n}\n\nasync function handleSearch(event) {\n    event.preventDefault();\n    const query = event.currentTarget.elements.searchQuery.value.trim();\n\n    if (query !== currentQuery) {\n        currentQuery = query;\n        page = 1;\n        clearGallery();\n        toggleVisibility(loadMoreButton, false);\n    }\n\n    if (query === \"\") {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search query!\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    showLoader();\n\n    try {\n        const data = await fetchData(query, page);\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            clearGallery();\n            showNoResultsMessage();\n            toggleVisibility(loadMoreButton, false);\n        } else {\n            renderImages(data.hits, list);\n            totalPages = Math.ceil(data.totalHits / 15); \n            page += 1;\n\n            toggleVisibility(loadMoreButton, page <= totalPages);\n        }\n    } catch (error) {\n        hideLoader();\n        console.error(\"Error:\", error);\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n}\n\nasync function handleLoadMore() {\n    showLoader();\n\n    try {\n        const data = await fetchData(currentQuery, page);\n        hideLoader();\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits, list);\n            page += 1;\n\n            const listItem = document.querySelector('.image-item');\n            if (listItem) {\n                const cardHeight = listItem.getBoundingClientRect().height;\n\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth'\n                });\n            }\n\n            const totalPages = Math.ceil(data.totalHits / 15);\n            if (page > totalPages) {\n                toggleVisibility(loadMoreButton, false);\n                iziToast.info({\n                    title: \"Info\",\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\"\n                });\n            }\n        } else {\n            toggleVisibility(loadMoreButton, false);\n            iziToast.info({\n                title: \"Info\",\n                message: \"No more images to load.\",\n                position: \"topRight\"\n            });\n        }\n    } catch (error) {\n        hideLoader();\n        console.error(\"Error:\", error);\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n}\n"],"names":["API_KEY","BASE_URL","fetchData","query","page","params","axios","error","lightbox","renderImages","images","container","markup","image","SimpleLightbox","showNoResultsMessage","iziToast","form","list","loadMoreButton","loader","handleSearch","handleLoadMore","currentQuery","totalPages","toggleVisibility","element","show","showLoader","hideLoader","clearGallery","event","data","listItem","cardHeight"],"mappings":"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"}